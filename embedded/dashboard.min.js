"use strict";!function(){const t=["today","week","month","year"],e={currentTab:"visitors",currentPeriod:"week"};function n(){return document.querySelectorAll(".period-btn")}function o(){return document.querySelector(".period-btn.active")}function i(t){var o;e.currentTab=t,o=t,document.querySelectorAll(".tab-btn").forEach(t=>{const e=t.dataset.tab;t.classList.toggle("active",e===o)}),function(t){const e=document.getElementById("period-selector");e&&("setup"===t?e.style.display="none":(e.style.display="block",function(t){const e=n(),o="bots"===t?"/admin/analytics/fragments/bot-stats":"/admin/analytics/fragments/stats";e.forEach(t=>{const e=t.dataset.period;e&&t.setAttribute("hx-get",`${o}?period=${e}`)})}(t)))}(t)}function r(t){e.currentPeriod=t,n().forEach(e=>{const n=e.dataset.period;e.classList.toggle("active",n===t)})}function c(){"setup"!==e.currentTab&&function(){const t=o();t&&t.click()}()}function a(n){if(!function(t){return"htmx:afterRequest"===t.type&&"detail"in t}(n))return;const i=n.detail;if(!i?.target||"content"!==i.target.id)return;const r=o();if(r){const n=r.dataset.period;n&&"string"==typeof(c=n)&&t.includes(c)&&(e.currentPeriod=n)}var c}function d(){"undefined"!=typeof window&&"undefined"!=typeof document&&(window.switchTab=i,window.setActivePeriod=r,window.dashboard={switchTab:i,setActivePeriod:r},document.addEventListener("htmx:afterRequest",a),window.setInterval(c,6e4))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d()}();